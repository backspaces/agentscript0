(function(){ABM.DatGUI=function(){function i(i,t){var e=this;this.gui=new dat.GUI,this.datGuiModel={};var a,s,u;2==arguments.length?(a=this.model=i,s=this.ui=t):(u=this.fbui=i,s=this.ui=u.ui);for(var n in s)if(s.hasOwnProperty(n)){var o=s[n];"button"!=o.type&&(this.datGuiModel[n]=o.val,u&&u.refs[n].child("val").on("value",function(i){e.datGuiModel[this.name]=i.val(),e.updateGui()}.bind({name:n})));var d=null;switch(o.type){case"button":this.datGuiModel[n]=e.fbui?function(){e.fbui.setUIValue(n,!0)}:function(){e.setModelValue(n)},this.gui.add(this.datGuiModel,n);break;case"choice":d=this.gui.add(this.datGuiModel,n,o.vals);break;case"switch":d=this.gui.add(this.datGuiModel,n);break;case"slider":d=this.gui.add(this.datGuiModel,n,o.min,o.max).step(o.step)}if(d){var h;h=e.fbui?function(i){e.fbui.setUIValue(this.name,i)}.bind({name:n}):function(i){e.setModelValue(this.name,i)}.bind({name:n}),o.smooth?d.onChange(h):d.onFinishChange(h)}}}return i.prototype.setModelValue=function(i,t){var e=this.ui[i].setter;e?this.model[e](t):this.model[i]=t},i.prototype.updateGui=function(){for(var i in this.gui.__controllers)this.gui.__controllers[i].updateDisplay()},i}()}).call(this);